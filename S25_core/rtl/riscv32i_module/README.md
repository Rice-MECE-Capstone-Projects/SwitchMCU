# SPring_2025_core


## Tool flow 
Make
gtkwave
iverilog


#### How to run rtl simulation
Make sure you have installed tools from above

"cd into rtl/riscv32i_module"
"make sim" --> generates vcd file
"make clean" --> to delete all files generated by sim (vcd, log etc)
"./run --> has both of these make commands"

to run Simulation
"gtkwave sim.vcd"

## Running Python 
This script automates running multiple test cases and be able to swap test cases
Assembly_code directory has currenst test case, these python scripts swap it out to run either a single or consecutive tests


In order for python to work, the ./run (make clean and make sim) should work, if they do not, this python will not work correctltly
If you use windows, use wsl, make sure python libaries are installed


"python3 run_multiple_test_cases.py"  --> this runs all avavlible test cases in the folder test_cases

"python3 run_single_test_case.py <int>"  runs a single test case, it swaps the test case from given number test case into assembly_code and swap out program.hex
IF YOU DONT INCLUDE NUMBER: the test case will swap out what ever is in the text file within assembly .txt

ex: "python3 run_single_test_case.py 7" runs test case 7

#### Files explained
params.vh    --> All paramters accross the design are defined here and none should be hard coded, all for decode and for size of wires should be declared here 
program.hex  --> This is the program memory that is loaded into instrtion memory 

assembly/program_disassembly.txt and assembly/instructions.log --> This is the instructions in assebly generagted by compiler but annotated to be human readable (NOTE the code does not start at address zero )

#### assembly/instructions.log  will have the starting address to put in pc.v 
Example:
000000ec <_start>: --> starting address should be 0xEC

Makefile --> script which runs the i-verilog simulation, generates vcd and simulation file (these files are not uploaded into git)

riscv32i.v --> top level module which connects all mdoules together, should be where five stage pipline resigns

riscv32iTB.v       --> test bench which runs for a number of set cycles

all other .v files --> modules used in the main riscv32i.v



pc.v  --> program counter, 

ins_mem.v --> instruction memory, here the starting address of the code is places, ex: address 0x120





iverilog -g2005-sv -s riscv32iTB -y XilinxUnisimLibrary/verilog/src -o riscv32i-sim riscv32iTB.v riscv32i.v ins_mem.v decod
e.v regfile.v excute.v pc.v dataMem.v hazard.v debug.v


./riscv32i-sim &> sim.log